@use "sass:color";
@use "sass:map";

@function get-color-theme-map($theme: "default") {
    // @warn $theme;
    @if $theme == "charcoal" {
        @return (
            "gray-100": #edf2f7,
            "gray-200": #e2e8f0,
            "gray-300": #cbd5e0,
            "gray-400": #a0aec0,
            "gray-500": #718096,
            "gray-600": #3d434d,
            "gray-700": #292d35,
            "gray-800": #1c1f24,
            "gray-900": #0f0f13
        );
    } @else if $theme == "blueberry" {
        @return (
            "gray-100": #d2e2f1,
            "gray-200": #cedcee,
            "gray-300": #b3c8df,
            "gray-400": #839ab8,
            "gray-500": #5d7496,
            "gray-600": #3c4d69,
            "gray-700": #233149,
            "gray-800": #161e2e,
            "gray-900": #171a2b
        );
    } @else {
        @return (
            "gray-100": #edf2f7,
            "gray-200": #e2e8f0,
            "gray-300": #cbd5e0,
            "gray-400": #a0aec0,
            "gray-500": #718096,
            "gray-600": #4a5568,
            "gray-700": #2d3748,
            "gray-800": #1a202c,
            "gray-900": #171923
        );
    }
}

@function get-color($color, $theme: "default") {
    @return map.get(get-color-theme-map($theme), $color);
}

:root[color-theme="default"] {
    $color-theme-var: "default";
    --gray-50: #f7fafc;
    @for $i from 1 through 9 {
        --gray-#{100 * $i}: #{get-color("gray-#{100 * $i}", $color-theme-var)};
    }
    @for $i from 1 through 8 {
        --gray-#{(100 * $i) + 50}: #{color.mix(
                get-color("gray-#{100 * $i}", $color-theme-var),
                get-color("gray-#{100 * ($i + 1)}", $color-theme-var),
                50%
            )};
    }
}

:root[color-theme="charcoal"] {
    $color-theme-var: "charcoal";
    --gray-50: #f7fafc;
    @for $i from 1 through 9 {
        --gray-#{100 * $i}: #{get-color("gray-#{100 * $i}", $color-theme-var)};
    }
    @for $i from 1 through 8 {
        --gray-#{(100 * $i) + 50}: #{color.mix(
                get-color("gray-#{100 * $i}", $color-theme-var),
                get-color("gray-#{100 * ($i + 1)}", $color-theme-var),
                50%
            )};
    }
}

:root {
    /* color palette */

    /* backgrounds */
    --bg-800: var(--gray-800);
    --bg-700: var(--gray-700);
    --bg-600: var(--gray-600);

    /* font colors */
    --fg-000: white;
    --fg-300: var(--gray-300);

    /* node colors */
    --node-border-color: var(--gray-800);
    --node-bg-color: var(--gray-750);
    --node-icon-color: var(--gray-200);

    --node-valid-bg: var(--gray-800);
    --node-valid-fg: var(--gray-100);
    --node-invalid-bg: var(--chakra-colors-red-600);
    --node-invalid-fg: var(--gray-800);

    --node-disable-bg: var(--gray-800);
    --node-disable-fg: var(--gray-600);

    --node-image-preview-bg: var(--node-bg-color);
    --node-image-preview-color: var(--gray-400);

    --node-image-preview-button-bg: var(--gray-750);
    --node-image-preview-button-bg-hover: var(--gray-600);
    --node-image-preview-button-fg: var(--gray-400);

    --tag-bg: var(--gray-750);
    --tag-fg: var(--gray-300);

    --connection-color: #171923;
    --chain-hole-color: #1a202c;

    /* node selector colors */
    --selector-node-bg: var(--gray-700);
    --selector-icon: var(--gray-400);
    --selector-text-bg: var(--gray-700);
    --selector-text-bg-hover: var(--gray-600);

    /* specific colors */
    --window-bg: var(--gray-900);
    --header-bg: var(--bg-800);
    --chain-editor-bg: var(--bg-800);
    --node-selector-bg: var(--bg-800);
}

:root[data-theme="light"] {
    /* backgrounds */
    --bg-800: var(--gray-200);
    --bg-700: var(--gray-300);
    --bg-600: var(--gray-400);

    /* font colors */
    --fg-000: black;
    --fg-300: var(--gray-500);

    /* node colors */
    --node-border-color: var(--gray-100);
    --node-bg-color: var(--gray-400);
    --node-icon-color: var(--gray-800);

    --node-valid-bg: var(--gray-300);
    --node-valid-fg: var(--gray-900);
    --node-invalid-bg: var(--chakra-colors-red-500);
    --node-invalid-fg: var(--gray-400);

    --node-disable-bg: var(--gray-300);
    --node-disable-fg: var(--gray-500);

    --node-image-preview-bg: var(--node-bg-color);
    --node-image-preview-color: var(--gray-700);

    --node-image-preview-button-bg: var(--gray-400);
    --node-image-preview-button-bg-hover: var(--gray-500);
    --node-image-preview-button-fg: var(--gray-700);

    --tag-bg: var(--gray-400);
    --tag-fg: var(--gray-700);

    --connection-color: #edf2f7;
    --chain-hole-color: #edf2f7;

    /* node selector colors */
    --selector-node-bg: var(--gray-50);
    --selector-icon: var(--gray-600);
    --selector-text-bg: var(--gray-50);
    --selector-text-bg-hover: var(--gray-100);

    /* specific colors */
    --window-bg: var(--gray-300);
}
